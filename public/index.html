<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SmartFogControl - Fog Machine Controller</title>
<link rel="stylesheet" href="../styles.css">
<link rel="manifest" href="manifest.json">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<header>
  <div class="header-content">
    <div class="logo-container">
      <i class="fas fa-cloud fa-2x"></i>
      <h1>Smart<span>Fog</span>Control</h1>
    </div>
    <div class="header-info">
      <div class="connection-status">
        <span id="networkStatus">Online</span>
        <div class="status-led"></div>
      </div>
      <div class="app-version">v2.2</div>
    </div>
  </div>
  <p class="tagline">Advanced Control for Your Fog Machines</p>
</header>

<main>
  <section class="section-card">
    <div class="section-header">
      <h2><i class="fas fa-microchip"></i> Device Management</h2>
      <button onclick="scanForDevices()" class="scan-btn">
        <i class="fas fa-bluetooth"></i> Scan
      </button>
    </div>
    <div id="devices-container" class="devices-container"></div>
    <div class="batch-controls">
      <button onclick="startAllDevices()" class="batch-btn">
        <i class="fas fa-play-circle"></i> Start All
      </button>
      <button onclick="emergencyStopAll()" class="batch-btn emergency-btn">
        <i class="fas fa-stop-circle"></i> STOP ALL
      </button>
    </div>
  </section>

  <section class="section-card">
    <h2><i class="fas fa-sliders-h"></i> Device Controls</h2>
    <div id="controls-container" class="controls-container"></div>
  </section>

  <section class="section-card">
    <h2><i class="fas fa-clock"></i> Scheduling</h2>
    <div class="schedule-form">
      <div class="form-group">
        <label for="scheduleName">Name</label>
        <input type="text" id="scheduleName" placeholder="Morning Show">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="scheduleTime">Time</label>
          <input type="time" id="scheduleTime" class="schedule-input">
        </div>
        <div class="form-group">
          <label for="scheduleRecurrence">Recurrence</label>
          <select id="scheduleRecurrence" class="schedule-input">
            <option value="daily">Daily</option>
            <option value="weekdays">Weekdays</option>
            <option value="weekends">Weekends</option>
            <option value="weekly">Weekly</option>
            <option value="once">Once</option>
          </select>
        </div>
      </div>
      <button onclick="addSchedule()" class="schedule-btn">
        <i class="fas fa-plus-circle"></i> Add
      </button>
    </div>
    <div class="schedules-header">
      <h3>Active Schedules</h3>
      <span id="schedules-count">0</span>
    </div>
    <div id="scheduleList" class="schedule-items"></div>
  </section>

  <section class="section-card">
    <h2><i class="fas fa-chart-bar"></i> Stats</h2>
    <div class="stats-header">
      <div class="time-filter">
        <select id="statsPeriod">
          <option value="today">Today</option>
          <option value="week">Week</option>
          <option value="month">Month</option>
          <option value="all">All</option>
        </select>
      </div>
      <button class="export-btn">
        <i class="fas fa-file-export"></i> Export
      </button>
    </div>
    <div id="stats-container" class="stats-grid"></div>
  </section>

  <section class="section-card">
    <h2><i class="fas fa-save"></i> Presets</h2>
    <div class="preset-controls">
      <button onclick="saveCurrentAsPreset()" class="preset-btn">
        <i class="fas fa-save"></i> Save
      </button>
      <button onclick="applyPresetToAll()" class="preset-btn">
        <i class="fas fa-sync-alt"></i> Apply All
      </button>
    </div>
    <div class="preset-list-header">
      <h3>Saved Presets</h3>
      <span id="presets-count">0</span>
    </div>
    <div id="presetList" class="preset-items"></div>
  </section>
</main>

<footer>
  <div class="footer-content">
    <div class="app-info">
      <p>SmartFogControl v2.2 | <span id="offlineStatus">Online</span></p>
      <p>Â© 2025 SmartFog Systems</p>
    </div>
    <div class="app-links">
      <button class="footer-btn"><i class="fas fa-cog"></i></button>
      <button class="footer-btn"><i class="fas fa-question-circle"></i></button>
      <button class="footer-btn"><i class="fas fa-bug"></i></button>
    </div>
  </div>
</footer>

<script src="../src/app.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // Network status indicator
  const netStatus = document.getElementById('offlineStatus');
  const netLed = document.querySelector('.status-led');
  
  function updateNetworkStatus() {
    if (navigator.onLine) {
      netStatus.textContent = 'Online';
      netStatus.style.color = '#00cc00';
      netLed.style.backgroundColor = '#00cc00';
    } else {
      netStatus.textContent = 'Offline';
      netStatus.style.color = '#ff4444';
      netLed.style.backgroundColor = '#ff4444';
    }
  }
  
  window.addEventListener('online', updateNetworkStatus);
  window.addEventListener('offline', updateNetworkStatus);
  updateNetworkStatus();
  
  // Initialize empty states
  document.getElementById('devices-container').innerHTML = `
    <div class="empty-state">
      <i class="fas fa-bluetooth fa-3x"></i>
      <h3>No Devices</h3>
      <p>Scan to connect fog machines</p>
      <button onclick="scanForDevices()" class="scan-btn">
        <i class="fas fa-bluetooth"></i> Scan
      </button>
    </div>`;
  
  document.getElementById('scheduleList').innerHTML = `
    <div class="empty-state">
      <i class="fas fa-calendar-plus fa-3x"></i>
      <h3>No Schedules</h3>
      <p>Create automation schedules</p>
    </div>`;
  
  document.getElementById('presetList').innerHTML = `
    <div class="empty-state">
      <i class="fas fa-save fa-3x"></i>
      <h3>No Presets</h3>
      <p>Save settings as presets</p>
    </div>`;
  
  document.getElementById('stats-container').innerHTML = `
    <div class="empty-state">
      <i class="fas fa-chart-line fa-3x"></i>
      <h3>No Data</h3>
      <p>Statistics appear after sessions</p>
    </div>`;
});
</script>
</body>
</html>
